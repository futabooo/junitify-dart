# Implementation Plan

## Task Breakdown

### 1. XMLジェネレーターの修正

#### 1.1 DefaultJUnitXmlGeneratorの_buildTestSuiteメソッドを修正
- [x] 属性を標準的な順序で設定する
  - 現在の順序: `name`, `tests`, `failures`, `errors`, `skipped`, `time`
  - 標準的な順序: `name`, `tests`, `failures`, `errors`, `skipped`, `time`, `timestamp`（オプション）
  - 現在のコードは既に正しい順序になっているが、xmlパッケージが属性の順序を保持することを確認する必要がある
  - `timestamp`属性は現在のTestSuiteモデルに存在しないため、将来の拡張のためにコメントで言及する
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 3.1, 3.2, 3.3, 3.4, 3.5_

#### 1.2 DefaultJUnitXmlGeneratorの_buildTestCaseメソッドを修正
- [x] 属性を標準的な順序で設定する
  - 現在の順序: `name`, `classname`, `time`, `file`（オプション）, `line`（オプション）
  - 標準的な順序: `name`, `classname`, `time`, `file`（オプション）, `line`（オプション）
  - 現在のコードは既に正しい順序になっているが、xmlパッケージが属性の順序を保持することを確認する必要がある
  - `file`属性が存在する場合、`time`属性の後に配置する
  - `line`属性が存在する場合、`file`属性の後に配置する（`file`が存在する場合）
  - `file`属性が存在せず`line`属性が存在する場合、`time`属性の後に`line`属性を配置する
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 3.1, 3.2, 3.3, 3.4, 3.5_

### 2. XML属性の順序制御の検証

#### 2.1 xmlパッケージが属性の順序を保持することを確認
- [x] xmlパッケージの動作を確認するテストを作成
  - `XmlBuilder`を使用して属性を設定する順序がXML出力に反映されることを確認
  - 属性の順序が保持されない場合、代替手段を検討する必要がある
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

### 3. ユニットテストの実装

#### 3.1 testsuite要素の属性順序の検証テスト
- [x] `<testsuite>`要素の属性順序を検証するテストを追加
  - 属性が`name`, `tests`, `failures`, `errors`, `skipped`, `time`の順序で出力されることを確認
  - XML文字列をパースして属性の順序を検証する
  - 属性の値が変更されないことを確認
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 5.1_

#### 3.2 testcase要素の属性順序の検証テスト
- [x] `<testcase>`要素の属性順序を検証するテストを追加
  - 属性が`name`, `classname`, `time`の順序で出力されることを確認
  - `file`属性が存在する場合、`time`属性の後に配置されることを確認
  - `line`属性が存在する場合、`file`属性の後に配置されることを確認
  - `file`属性が存在せず`line`属性が存在する場合、`time`属性の後に`line`属性が配置されることを確認
  - XML文字列をパースして属性の順序を検証する
  - 属性の値が変更されないことを確認
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 5.2_

#### 3.3 既存のテストケースの動作確認
- [x] 既存のテストケースが正常に通過することを確認
  - 既存のテストケースで属性の値が変更されないことを確認
  - 既存のテストケースでXML出力が正常に生成されることを確認
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 5.3_

### 4. 統合テストの実装

#### 4.1 エンドツーエンドテスト: 属性順序の検証
- [ ] 生成されたXMLファイルの属性順序を検証するテストを追加
  - testmoapp/junitxmlリポジトリの例と比較して順序が一致することを確認
  - 複数のテストスイートとテストケースを含むXMLファイルで属性順序を検証
  - 既存のCI/CDツールとの互換性を確認
  - _Requirements: 1.4, 1.6, 2.5, 2.7, 5.4, 5.5_

#### 4.2 パフォーマンステスト
- [ ] 属性の順序修正がパフォーマンスに大きな影響を与えないことを確認
  - 既存の処理時間と比較して10%以内の増加であることを確認
  - 大量のテストケースを含むXMLファイルでパフォーマンスを測定
  - _Requirements: 3.5_

### 5. ドキュメントの更新

#### 5.1 コードコメントの更新
- [x] 属性の順序に関するコメントを追加
  - `_buildTestSuite`メソッドに属性の順序に関するコメントを追加
  - `_buildTestCase`メソッドに属性の順序に関するコメントを追加
  - 標準的なJUnit XML形式への準拠を明記
  - _Requirements: 1.4, 2.5_

